# Jolti
use std::thread;

// Функция создаёт 10 "задач", которые выполняются параллельно.
// Чтобы убедиться в параллельности, запустите программу несколько раз,
// и обратите внимание на непостоянный порядок вывода результатов.
fn main() {
    // Эта строка неизменяемая, поэтому может безопасно использоваться
    // из нескольких задач.
    let greeting = "Привет";
    let mut threads = Vec::new();

    // Цикл for работает с любым типом, реализующим
    // интерфейс (trait) Iterator.
    for num in 0..10 {
        threads.push(thread::spawn(move || {
            // println! - это статический макрос, выполняющий форматирование
            // строки и её вывод. Макросы структурные (как в Scheme), а не
            // текстовые (как в Си).
            println!("{} из потока номер {}", greeting, num);
        }));
    }
    for thread in threads {
        let res = thread.join();
        if let Err(_) = res {
            println!("Произошла ошибка!");
        }
    }
}
